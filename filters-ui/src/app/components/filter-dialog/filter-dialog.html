<div class="overlay" (click)="close()">
  <div class="dialog" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h2 class="text-lg font-semibold text-white">Filter</h2>
      <button class="text-white text-xl font-bold hover:text-gray-200" (click)="close()">
        &times;
      </button>
    </div>

    <div class="dialog-body">
      <div class="mb-2 grid grid-cols-[80px_1fr_auto] items-center gap-2">
        <label class="text-sm font-medium text-gray-700"> Filter name </label>

        <input
          type="text"
          class="col-span-1 rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
          [(ngModel)]="filterName"
        />
      </div>

      @for (row of criteriaRows; track $index) {
        <div class="grid grid-cols-[80px_1fr_auto] items-center gap-2">
          @if ($index === 0) {
            <label class="pt2 text-sm font-medium text-gray-700"> Criteria </label>
          } @if ($index > 0) {
            <span></span>
          }

          <app-filter-row
            [defaultField]="'Amount'"
            (valueChange)="getRowChangeFn($index)($event)"
          />

          <button class="ml-2 text-white bg-pink-800 font-bold px-2 py-1 rounded hover:bg-pink-700" (click)="removeRow($index)">
            &minus;
          </button>
        </div>
      }

      <div class="flex justify-center mt-2">
        <button
          class="mt-2 w-fit justify-self-center rounded-md bg-zinc-600 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-400"
          (click)="addRow()"
        >
          ADD ROW
        </button>
      </div>
    </div>

    <div class="dialog-footer">
      <button class="common-button cancel-button" (click)="close()">CLOSE</button>
      <button class="common-button primary-button" (click)="confirm()">SAVE</button>
    </div>
  </div>
</div>
