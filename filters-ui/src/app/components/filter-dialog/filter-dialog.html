@if (!inline) {
  <div class="overlay" (click)="close()">
    <div class="dialog" (click)="$event.stopPropagation()">
      <ng-container [ngTemplateOutlet]="dialogContent" />
    </div>
  </div>
} @if (inline) {
  <div class="dialog inline">
    <ng-container [ngTemplateOutlet]="dialogContent" />
  </div>
}

<ng-template #dialogContent>
  <div class="dialog-header">
    <h2 class="dialog-title">Filter</h2>
    <button class="close-button" (click)="close()">
      &times;
    </button>
  </div>

  <div class="dialog-body">
    <div class="filter-row">
      <label class="filter-label"> Filter name </label>

      <input
        type="text"
        class="filter-input"
        [(ngModel)]="filterName"
      />
    </div>

    @for (row of criteriaRows; track $index) {
      <div class="filter-row">
      @if ($index === 0) {
        <label class="filter-label"> Criteria </label>
      } @if ($index > 0) {
        <span></span>
      }

      <app-filter-row (valueChange)="getRowChangeFn($index)($event)" />

      <button
        class="remove-button"
        (click)="removeRow($index)"
      >
        &minus;
      </button>
    </div>
    }

    <div class="add-row-container">
      <button
        class="add-row-button"
        (click)="addRow()"
      >
        + ADD ROW
      </button>
    </div>
  </div>

  <div class="dialog-footer">
    <button class="cancel-button" (click)="close()">CLOSE</button>
    <button class="save-button" (click)="confirm()">SAVE</button>
  </div>
</ng-template>
